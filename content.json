{"posts":[{"title":"Apifox","text":"记录一下使用Apifox时的一些配置和脚本。 设置网络代理Apifox默认不使用网络代理，需要在应用内自行设置。 脚本在请求头中加入请求时间123var currentDate = (new Date()).toUTCString();pm.request.headers.add({ key: &quot;Timestamp&quot;, value: currentDate});","link":"/2024/01/28/Apifox/"},{"title":"JWT简介","text":"什么是 JSON Web Token?JSON Web Token(JWT)是一种开放标准(RFC 7519)，他定义了一种紧凑且独立的方式，用于在各方之间以JSON对象的形式安全地传输信息。该信息可以被验证和信任，因为它是经过数字签名的。JWT可以使用密钥（使用HMAC算法）或使用RSA或ECDSA的公钥/私钥对进行签名。 尽管JWT可以加密以在各方之间提供保密性，但我们将重点关注签名令牌。签名令牌可以验证其中包含的声明的完整性，而加密令牌则向其他方隐藏这些声明。当使用公钥/私钥对对令牌进行签名时，签名还证明只有持有私钥的一方才是对其进行签名的一方。 什么使用应该使用 JSON Web Token？以下是JSON Web Token有用的一些场景： 认证：这是使用JWT最常见的场景。用户登录后，每个后续请求都将包含JWT，从而允许用户访问该令牌允许的路由、服务和资源。`单点登录`是当今广泛使用JWT的一项功能，因为它的开销很小并且能够轻松地跨不同域使用。 信息交换：JSON Web Token是在各方之间安全传输信息的好方法。因为JWT可以进行签名（例如，使用公钥/私钥对），所以您可以确定发送者就是他们所说的人。此外，由于签名是使用header和payload计算的，因此您还可以验证内容是否被篡改。 JSON Web Token结构是什么？在其紧凑形式中，JSON Web Token由用点（.）分割的三个部分组成，它们是： Header Payload Signature 因此，JWT通常看起来像这样：xxxx.yyyy.zzzz 让我们来看一看每一部分。 Headerheader通常由两部分组成：令牌的类型（JWT）和所使用的签名算法（例如HMAC SHA256或RSA）。 例如 1234{ &quot;alg&quot;: &quot;HS256&quot;, &quot;typ&quot;: &quot;JWT&quot;} 然后，对该JSON进行BaseUrl编码以形成JWT的第一部分。 Payloadtoken的第二部分是payload，其中包含声明（claims）。声明是关于实体（通常是用户）和附加数据的声明。声明分为三种类型：注册声明、公共声明和私人声明。 注册声明：这些是一组预定义的声明，不是强制性的，而是推荐的，以提供一组有用的、可互操作的声明。其中一些是：iss（发行者）、exp（到期时间）、sub（主题）、aud（受众）等。 公共声明：这些可以由使用JWT的人随意定义。但为了避免冲突，它们应该在IANA JSON Web Token Registry中定义，或者定义为包含放冲突命名空间的URI。 私人声明：这些是为在同意使用它们的各方之间共享信息而创建的自定义声明，既不是注册声明也不是公开声明。 请注意，声明名称只有三个字符长，因为JWT旨在紧凑。 有效的payload可以是： 12345{ &quot;sub&quot;: &quot;12345&quot;, &quot;name&quot;: &quot;Rey&quot;, &quot;admin&quot;: true} 然后对payload进行Base64Url编码以形成JSON Web Token的第二部分。 请注意，对于签名令牌，此信息虽然受到防止篡改的保护，但是任何人都可以读取。除非加密，否则请勿将蜜柑信息放入JWT的payload或header中。 Signature要创建签名部分，您必须获取编码的header、编码的payload、密钥、header中指定的算法，然后对其进行签名。 例如，如果要使用HMAC SHA256算法，则将通过以下方式创建签名： 12345HMACSHA256( base64UrlEncode(header) + &quot;.&quot; + base64UrlEncode(payload), secret) 签名用于验证消息在传输过程中没有发生更改，并且在使用私钥签名的令牌的情况下，它还可以验证JWT的发送者是否是其所说的人。 将所有内容放在一起输出是三个由点分隔的Base64-URL字符串，可以在HTML和HTTP环境中轻松传递，同时与基于XML的标准（例如SAML）相比更加紧凑。 下面显示了一个JWT，它具有先前的header和payload编码，并且使用密钥进行签名。 1eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c 如果您想使用JWT并将这些概念付诸实践，您可以使用 jwt.io Debugger来解码、验证和生成JWT。 JSON Web Token如何工作？在身份验证中，当用户使用其凭据成功登录时，将返回 JSON Web Token。由于token是凭证因此必须非常小心地防止安全问题。一般来说，您保留token的时间不应超过所需时间。 由于缺乏安全性，您也不应该将敏感会话数据存储在浏览器存储中。 每当用户想要访问受保护的路由或资源时，用户应该发送JWT，通常使用Bearer模式在header中的Authorization中发送。header的内容应如下所示： 1Authorization: Bearer &lt;token&gt; 在某些情况下，这可以是无状态授权机制。服务器的受保护路由将检查Authorization标头中是否存在有效的JWT，如果存在，则将允许用于访问受保护的资源。如果JWT包含必要的数据，则可能会减少查询数据库以执行某些操作的需要，尽管情况可能并非总是如此。 请注意，如果您通过HTTP标头发送JWT令牌，则应尽量防止它们变得太大。某些服务器不接受超过8KB的标头。如果您尝试在JWT令牌中嵌入太多信息（例如包含所有用户的权限），您可能需要替代解决方案，例如 Auth0 Fine-Grained Authorization。 如果令牌在Authorization标头中发送，跨域资源共享将不会成为问题，因为它不使用 cookie。 下图展示了如何获取JWT并用于访问API或资源： 应用程序或客户端向服务器请求授权。这是通过不同的授权流程之一执行的。例如典型的OpenID Connect兼容Web应用程序将使用 authorization code flow 通过/oauth/authorize端点。 收于授权后，授权服务器将访问令牌返回给应用程序。 应用程序使用访问令牌来访问受保护的资源（例如API）。 请注意，使用签名令牌时，令牌中包含的所有信息都会向用户或其他方公开，即使它们无法更改它。这意味着您不应将敏感信息放入令牌中。 为什么我们应该使用JSON Web Token？我们来谈谈 JSON Web Tokens(JWT) 与 Simple Web Tokens(SWT) 和 Security Assertion Markup Language Tokens(SAML) 相比的优势。 由于JSON比XML更简洁，因此在编码时其大小也更小，使得JWT比SAML更紧凑。这使得JWT成为在HTML和HTTP环境中传递的不错选择。 从安全角度来看，SWT只能使用HMAC算法通过共享密钥进行对称签名。但是，JWT和SAML令牌可以使用 X.509 证书形式的公钥/私钥对进行签名。与简单签名相比，使用XML数字签名对XML进行签名而不引入安全漏洞是非常困难的。 关于使用，JWT 用于互联网规模。这凸显了在多个平台（尤其是移动平台）上客户端处理 JSON Web Token 的简便性。 编码的JWT和编码的SAML的长度比较 参考链接 Introduction to JSON Web Tokens","link":"/2024/01/31/JWT%E7%AE%80%E4%BB%8B/"},{"title":"chrome快捷键","text":"说明 快捷键 关闭当前标签页 cmd + w","link":"/2024/02/14/chrome%E5%BF%AB%E6%8D%B7%E9%94%AE/"},{"title":"Mac快捷键","text":"说明 快捷键 显示隐藏文件 cmd + shift + . spotlight搜索 cmd + 空格 退出应用程序 cmd + q 隐藏应用程序 cmd + h 最小化应用程序 cmd + m 截屏 shift + cmd + 5 查看预览 选择文件，然后按空格","link":"/2024/02/01/Mac%E5%BF%AB%E6%8D%B7%E9%94%AE/"},{"title":"npm-registry","text":"因为npm默认的源是外网，所以很慢。国内的同学如果想要快速下载，需要配置国内镜像源。 源123https://registry.npmjs.org/ # officialhttps://mirrors.aliyun.com/pypi/simple/ # ali 临时使用1npm install 包名 -i 源地址 永久使用1npm config set registry 源地址 获取当前源1npm config get registry","link":"/2024/01/27/npm-registry/"},{"title":"pip-registry","text":"python pip默认的源因为是外网，所以很慢。如果想要快速下载，需要配置国内镜像源。 源1https://mirrors.aliyun.com/pypi/simple/ # ali 临时使用1pip install 包名 -i 源地址 永久使用1pip config set global.index-url 源地址","link":"/2024/01/26/pip-registry/"},{"title":"mac python3安装mysqlclient错误","text":"开发时使用mac python3安装mysqlclient时发生错误，特此记录。 解决12brew install opensslexport LIBRARY_PATH=$LIBRARY_PATH:/usr/local/opt/openssl/lib/ 报错信息1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374&gt; pip install mysqlclientCollecting mysqlclient Using cached https://files.pythonhosted.org/packages/ec/fd/83329b9d3e14f7344d1cb31f128e6dbba70c5975c9e57896815dbb1988ad/mysqlclient-1.3.13.tar.gzBuilding wheels for collected packages: mysqlclient Running setup.py bdist_wheel for mysqlclient ... error Complete output from command /Users/lixiang/projects/py3/bin/python3 -u -c &quot;import setuptools, tokenize;__file__='/private/var/folders/62/hgjxw8x902346sf1zkbv0tyc0000gn/T/pip-install-cg1t5xfv/mysqlclient/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))&quot; bdist_wheel -d /private/var/folders/62/hgjxw8x902346sf1zkbv0tyc0000gn/T/pip-wheel-4k0re98e --python-tag cp36: running bdist_wheel running build running build_py creating build creating build/lib.macosx-10.9-x86_64-3.6 copying _mysql_exceptions.py -&gt; build/lib.macosx-10.9-x86_64-3.6 creating build/lib.macosx-10.9-x86_64-3.6/MySQLdb copying MySQLdb/__init__.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb copying MySQLdb/compat.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb copying MySQLdb/connections.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb copying MySQLdb/converters.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb copying MySQLdb/cursors.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb copying MySQLdb/release.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb copying MySQLdb/times.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb creating build/lib.macosx-10.9-x86_64-3.6/MySQLdb/constants copying MySQLdb/constants/__init__.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb/constants copying MySQLdb/constants/CLIENT.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb/constants copying MySQLdb/constants/CR.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb/constants copying MySQLdb/constants/ER.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb/constants copying MySQLdb/constants/FIELD_TYPE.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb/constants copying MySQLdb/constants/FLAG.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb/constants copying MySQLdb/constants/REFRESH.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb/constants running build_ext building '_mysql' extension creating build/temp.macosx-10.9-x86_64-3.6 gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -fno-common -dynamic -DNDEBUG -g -fwrapv -O3 -Wall -arch x86_64 -g -Dversion_info=(1,3,13,'final',0) -D__version__=1.3.13 -I/usr/local/Cellar/mysql/8.0.12/include/mysql -I/Library/Frameworks/Python.framework/Versions/3.6/include/python3.6m -c _mysql.c -o build/temp.macosx-10.9-x86_64-3.6/_mysql.o gcc -bundle -undefined dynamic_lookup -arch x86_64 -g build/temp.macosx-10.9-x86_64-3.6/_mysql.o -L/usr/local/Cellar/mysql/8.0.12/lib -lmysqlclient -lssl -lcrypto -o build/lib.macosx-10.9-x86_64-3.6/_mysql.cpython-36m-darwin.so ld: library not found for -lssl clang: error: linker command failed with exit code 1 (use -v to see invocation) error: command 'gcc' failed with exit status 1 ---------------------------------------- Failed building wheel for mysqlclient Running setup.py clean for mysqlclient Failed to build mysqlclient Installing collected packages: mysqlclient Running setup.py install for mysqlclient ... error Complete output from command /Users/lixiang/projects/py3/bin/python3 -u -c &quot;import setuptools, tokenize;__file__='/private/var/folders/62/hgjxw8x902346sf1zkbv0tyc0000gn/T/pip-install-cg1t5xfv/mysqlclient/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))&quot; install --record /private/var/folders/62/hgjxw8x902346sf1zkbv0tyc0000gn/T/pip-record-z495c9l8/install-record.txt --single-version-externally-managed --compile --install-headers /Users/lixiang/projects/py3/bin/../include/site/python3.6/mysqlclient: running install running build running build_py creating build creating build/lib.macosx-10.9-x86_64-3.6 copying _mysql_exceptions.py -&gt; build/lib.macosx-10.9-x86_64-3.6 creating build/lib.macosx-10.9-x86_64-3.6/MySQLdb copying MySQLdb/__init__.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb copying MySQLdb/compat.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb copying MySQLdb/connections.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb copying MySQLdb/converters.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb copying MySQLdb/cursors.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb copying MySQLdb/release.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb copying MySQLdb/times.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb creating build/lib.macosx-10.9-x86_64-3.6/MySQLdb/constants copying MySQLdb/constants/__init__.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb/constants copying MySQLdb/constants/CLIENT.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb/constants copying MySQLdb/constants/CR.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb/constants copying MySQLdb/constants/ER.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb/constants copying MySQLdb/constants/FIELD_TYPE.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb/constants copying MySQLdb/constants/FLAG.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb/constants copying MySQLdb/constants/REFRESH.py -&gt; build/lib.macosx-10.9-x86_64-3.6/MySQLdb/constants running build_ext building '_mysql' extension creating build/temp.macosx-10.9-x86_64-3.6 gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -fno-common -dynamic -DNDEBUG -g -fwrapv -O3 -Wall -arch x86_64 -g -Dversion_info=(1,3,13,'final',0) -D__version__=1.3.13 -I/usr/local/Cellar/mysql/8.0.12/include/mysql -I/Library/Frameworks/Python.framework/Versions/3.6/include/python3.6m -c _mysql.c -o build/temp.macosx-10.9-x86_64-3.6/_mysql.o gcc -bundle -undefined dynamic_lookup -arch x86_64 -g build/temp.macosx-10.9-x86_64-3.6/_mysql.o -L/usr/local/Cellar/mysql/8.0.12/lib -lmysqlclient -lssl -lcrypto -o build/lib.macosx-10.9-x86_64-3.6/_mysql.cpython-36m-darwin.so ld: library not found for -lssl # 主要信息在这里 clang: error: linker command failed with exit code 1 (use -v to see invocation) error: command 'gcc' failed with exit status 1","link":"/2024/01/26/mac-python3%E5%AE%89%E8%A3%85mysqlclient%E9%94%99%E8%AF%AF/"},{"title":"pyenv-virtualenv","text":"想要在pc上同时使用多版本的python，pyenv-virtualenv可以满足你的需求。 查看当前python版本 1pyenv version 使用当前版本创建环境 1pyenv virtualenv &lt;name&gt; 列出所有虚拟环境 1pyenv virtualenvs 激活环境 1pyenv activate &lt;name&gt; 退出环境 1pyenv deactivate 删除环境 1pyenv uninstall &lt;name&gt;","link":"/2024/01/27/pyenv-virtualenv/"},{"title":"virtualenvwrapper","text":"python虚拟环境管理工具 基本命令12345mkvirtualenv test --python=python3lsvirtualenvworkon testdeactivatermvirtualenv test","link":"/2024/01/26/virtualenvwrapper/"},{"title":"在TypeScript中使用dotenv","text":"环境1234node = v21.6.2npm = 8.6.0dotenv = 16.4.5ts-node = 10.9.1 安装包1npm install dotenv 创建环境变量文件12# vim .envENVIRONMENT = dev 创建TypeScript文件1234567// vim app.tsimport dotenv from &quot;dotenv&quot;;dotenv.config();const environment: any = process.env.ENVIRONMENT;console.log(&quot;environment:&quot;, environment);","link":"/2024/09/09/%E5%9C%A8TypeScript%E4%B8%AD%E4%BD%BF%E7%94%A8dotenv/"},{"title":"切换git配置","text":"开发人员可能有多个github账号，每次输入命令手动切换比较麻烦，分享一个脚本用于切换全局git配置。 代码示例: 运行: 1./switch_git.sh &lt;name1&gt;","link":"/2024/02/19/%E5%88%87%E6%8D%A2git%E9%85%8D%E7%BD%AE/"}],"tags":[{"name":"apifox","slug":"apifox","link":"/tags/apifox/"},{"name":"jwt","slug":"jwt","link":"/tags/jwt/"},{"name":"pc","slug":"pc","link":"/tags/pc/"},{"name":"mac","slug":"mac","link":"/tags/mac/"},{"name":"npm","slug":"npm","link":"/tags/npm/"},{"name":"registry","slug":"registry","link":"/tags/registry/"},{"name":"python","slug":"python","link":"/tags/python/"},{"name":"pip","slug":"pip","link":"/tags/pip/"},{"name":"mysqlclient","slug":"mysqlclient","link":"/tags/mysqlclient/"},{"name":"pyenv","slug":"pyenv","link":"/tags/pyenv/"},{"name":"virtualenv","slug":"virtualenv","link":"/tags/virtualenv/"},{"name":"virtualenvwrapper","slug":"virtualenvwrapper","link":"/tags/virtualenvwrapper/"},{"name":"dotenv","slug":"dotenv","link":"/tags/dotenv/"},{"name":"git","slug":"git","link":"/tags/git/"}],"categories":[{"name":"apifox","slug":"apifox","link":"/categories/apifox/"},{"name":"http","slug":"http","link":"/categories/http/"},{"name":"chrome","slug":"chrome","link":"/categories/chrome/"},{"name":"pc","slug":"pc","link":"/categories/pc/"},{"name":"npm","slug":"npm","link":"/categories/npm/"},{"name":"python","slug":"python","link":"/categories/python/"},{"name":"typescript","slug":"typescript","link":"/categories/typescript/"},{"name":"git","slug":"git","link":"/categories/git/"}],"pages":[]}